"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23],{23:(e,a,t)=>{t.d(a,{default:()=>E});var l=t(5155),s=t(2115),r=t(6874),n=t.n(r),o=t(1700),i=t(4416),d=t(2596),c=t(9688);function u(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,c.QP)((0,d.$)(a))}function m(e){let{...a}=e;return(0,l.jsx)(o.bL,{"data-slot":"dialog",...a})}function x(e){let{...a}=e;return(0,l.jsx)(o.l9,{"data-slot":"dialog-trigger",...a})}function h(e){let{...a}=e;return(0,l.jsx)(o.ZL,{"data-slot":"dialog-portal",...a})}function g(e){let{className:a,...t}=e;return(0,l.jsx)(o.hJ,{"data-slot":"dialog-overlay",className:u("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t})}function p(e){let{className:a,children:t,...s}=e;return(0,l.jsxs)(h,{"data-slot":"dialog-portal",children:[(0,l.jsx)(g,{}),(0,l.jsxs)(o.UC,{"data-slot":"dialog-content",className:u("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...s,children:[t,(0,l.jsxs)(o.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,l.jsx)(i.A,{}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}var b=t(1962);let f=e=>{let{label:a,onClick:t,type:s="button",variant:r="primary",className:n="",disabled:o=!1}=e;return(0,l.jsx)("button",{type:s,onClick:t,disabled:o,className:(0,d.A)("px-4 py-2 rounded-md font-medium text-sm transition-all duration-150",{primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300"}[r],n,{"opacity-50 cursor-not-allowed":o}),children:a})};var v=t(4751),j=t(4239),y=t(4186);t(5279);let w=e=>{let{label:a,onChange:t}=e,[r,n]=(0,s.useState)(null),[o,i]=(0,s.useState)(null);return(0,l.jsxs)("div",{className:"flex flex-col gap-3 w-full max-w-xl p-4 bg-white rounded-2xl shadow-md",children:[a&&(0,l.jsx)("h4",{className:"text-base font-semibold text-gray-700",children:a}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{className:"text-sm text-gray-600 mb-1",children:"เวลาเริ่มต้น"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(y.A,{className:"w-4 h-4 absolute top-1/2 left-3 -translate-y-1/2 text-gray-400"}),(0,l.jsx)(j.Ay,{selected:r,onChange:e=>{n(e),null==t||t(e,o)},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"เวลา",dateFormat:"HH:mm",placeholderText:"เลือกเวลาเริ่มต้น",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("label",{className:"text-sm text-gray-600 mb-1",children:"เวลาสิ้นสุด"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(y.A,{className:"w-4 h-4 absolute top-1/2 left-3 -translate-y-1/2 text-gray-400"}),(0,l.jsx)(j.Ay,{selected:o,onChange:e=>{i(e),null==t||t(r,e)},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"เวลา",dateFormat:"HH:mm",placeholderText:"เลือกเวลาสิ้นสุด",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]})};var N=t(2090),A=t(6766);let C=e=>{let{label:a,name:t,onChange:r}=e,[n,o]=(0,s.useState)(null);return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[a&&(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700",children:a}),(0,l.jsxs)("div",{className:"relative w-40 h-40 border-2 border-dashed rounded-lg overflow-hidden cursor-pointer",children:[(0,l.jsx)("input",{type:"file",accept:"image/*",name:t,onChange:e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!t)return;let l=URL.createObjectURL(t);o(l),r(t,l)},className:"absolute inset-0 opacity-0 z-10 cursor-pointer"}),n?(0,l.jsx)(A.default,{src:n,alt:"Preview",fill:!0,className:"object-cover"}):(0,l.jsx)("div",{className:"flex items-center justify-center w-full h-full text-gray-500 z-0",children:"เลือกหรือถ่ายภาพ"})]})]})};var S=t(1880),T=t(6671);function E(e){let{subjects:a}=e,[t,r]=(0,s.useState)(!1),[o,i]=(0,s.useState)(0),[d,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)({image:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:"",birthday:"",phone:"",gender:"",subject:"",method:"",day:"",province:"",hourlyRate:"",timeStart:"",timeEnd:"",bio:"",technique:"",experience:""}),g=a.map(e=>({label:e.name,value:e.id.toString()})),j=e=>{let{name:a,value:t}=e.target;h(e=>({...e,[a]:t}))},y=u.email&&u.password&&u.confirmPassword&&u.password===u.confirmPassword,A=u.firstName&&u.phone&&u.subject&&u.method&&u.day&&u.province&&u.hourlyRate,E=async()=>{if(A){let e={email:u.email,password:u.password,role:"TUTOR"};await S.A.user.registerUser({data:e}).then(async e=>{if(200!==e.status){T.o.error("Email มีการสมัครแล้ว หรือ รหัสผ่านตำกว่า 8 ตัวอักษร",{className:"!text-red-500"});return}let a={image:u.image,phoneNumber:u.phone,pricePerHour:parseInt(u.hourlyRate),province:u.province,tutorName:u.firstName,description:u.bio,technique:u.technique,categoryId:[parseInt(u.subject)],teachingTime:u.day,timeStart:u.timeStart,timeEnd:u.timeEnd,experience:u.experience.split("\n"),levels:[1],userId:e.data.data.id,teachingMethod:u.method,sex:u.gender,languageTaught:"THAI"};await S.A.user.createUser({data:a}).then(e=>{if(200!==e.status){T.o.error("เกิดข้อผิดพลาดในการสมัคร",{className:"!text-red-500"});return}T.o.success("สมัครสําเร็จ",{className:"!text-green-500"}),c(!1)})})}};return(0,l.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between px-4 py-4",children:[(0,l.jsx)(n(),{href:"/",className:"text-2xl font-bold text-blue-600",children:"Tutor"}),(0,l.jsx)("div",{className:"flex space-x-2",children:(0,l.jsxs)(m,{open:d,onOpenChange:c,children:[(0,l.jsx)(x,{children:(0,l.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-full text-sm cursor-pointer",children:"ลงทะเบียน เป็น ติวเตอร์"})}),(0,l.jsxs)(p,{className:"max-w-md lg:max-w-xl max-h-[90vh] overflow-auto",children:[(0,l.jsx)("h6",{className:"font-semibold text-lg mb-2",children:"ลงทะเบียน เป็น ติวเตอร์ กับ เรา"}),(0,l.jsxs)("form",{className:"space-y-4 !w-full",onSubmit:e=>e.preventDefault(),children:[0===o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b.A,{label:"Email",name:"email",value:u.email,onChange:j,type:"email",placeholder:"example@mail.com"}),(0,l.jsx)(b.A,{label:"Password",name:"password",value:u.password,onChange:j,type:"password",placeholder:"********"}),(0,l.jsx)(b.A,{label:"Confirm Password",name:"confirmPassword",value:u.confirmPassword,onChange:j,type:"password",placeholder:"********"})]}),1===o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b.A,{label:"ชื่อติวเตอร์",name:"firstName",value:u.firstName,onChange:j}),(0,l.jsx)(b.A,{label:"เบอร์โทรศัพท์",name:"phone",value:u.phone,onChange:j}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,l.jsx)(v.A,{label:"เพศ",name:"gender",options:[{label:"ชาย",value:"MAN"},{label:"หญิง",value:"WOMAN"}],value:u.gender,onChange:j}),(0,l.jsx)(v.A,{label:"วิชาที่สอน",name:"subject",options:g,value:u.subject,onChange:j}),(0,l.jsx)(v.A,{label:"รูปแบบการสอน",name:"method",options:[{label:"ออนไลน์",value:"ONLINE"},{label:"ออนไซต์",value:"ONSITE"},{label:"ทั้งสองแบบ",value:"BOTH"}],value:u.method,onChange:j})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,l.jsx)(v.A,{label:"วันที่สอน",name:"day",options:[{label:"จ-ศ",value:"WEEKDAY"},{label:"ส-อา",value:"WEEKEND"},{label:"ทุกวัน",value:"EVERYDAY"}],value:u.day,onChange:j}),(0,l.jsx)(b.A,{label:"จังหวัดที่สอน",name:"province",value:u.province,onChange:j}),(0,l.jsx)(b.A,{label:"ราคาต่อชั่วโมง",name:"hourlyRate",value:u.hourlyRate,onChange:j})]}),(0,l.jsx)(w,{label:"เลือกช่วงเวลา",onChange:(e,a)=>h(t=>({...t,timeStart:e?e.toISOString():"",timeEnd:a?a.toISOString():""}))}),(0,l.jsx)(N.A,{label:"แนะนำตัว",name:"bio",value:u.bio,onChange:j,rows:4}),(0,l.jsx)(N.A,{label:"เทคนิคการสอน",name:"technique",value:u.technique,onChange:j,rows:4}),(0,l.jsx)(N.A,{label:"ประสบการณ์",name:"experience",value:u.experience,onChange:j,rows:4}),(0,l.jsx)(C,{name:"profileImage",label:"รูปโปรไฟล์",onChange:e=>{let a=new FileReader;a.onloadend=()=>{let e=a.result;h(a=>({...a,image:e}))},e&&a.readAsDataURL(e)}})]}),(0,l.jsxs)("div",{className:"flex justify-between gap-2 pt-2",children:[o>0&&(0,l.jsx)(f,{label:"ย้อนกลับ",variant:"secondary",onClick:()=>i(o-1),className:"w-1/2 h-12"}),(0,l.jsx)(f,{label:1===o?"ส่งข้อมูล":"ถัดไป",variant:"primary",onClick:0===o?()=>{0===o&&y&&i(1)}:E,className:o>0?"w-1/2 h-12":"w-full h-12",disabled:0===o?!y:!A})]})]})]})]})})]})})}},1880:(e,a,t)=>{t.d(a,{A:()=>h});var l={};t.r(l),t.d(l,{getSubjects:()=>i});var s={};t.r(s),t.d(s,{createUser:()=>d,registerUser:()=>c});var r={};t.r(r),t.d(r,{bookingTutor:()=>u,getTutorById:()=>x,getTutorSubjects:()=>m});var n=t(4477);let o=(0,n.createServerReference)("7f0fdedfb2082751bb2a848799fa1ee7b93302411b",n.callServer,void 0,n.findSourceMapURL,"fetchFromApi"),i=async()=>await o({path:"/api/v1/catagory/",config:{method:"GET"}}),d=async e=>{let{data:a}=e;return await o({path:"/api/v1/user/tutor-detail",config:{method:"POST",body:JSON.stringify(a)}})},c=async e=>{let{data:a}=e;return await o({path:"/api/v1/auth/register",config:{method:"POST",body:JSON.stringify(a)}})},u=async e=>{let{data:a}=e;return await o({path:"/api/v1/booking/create",config:{method:"POST",body:JSON.stringify(a)}})},m=async e=>{let{id:a}=e;return await o({path:"/api/v1/user/tutors/".concat(a),config:{method:"GET"}})},x=async e=>{let{id:a}=e;return await o({path:"/api/v1/user/tutor/".concat(a),config:{method:"GET"}})},h={subject:l,user:s,tutor:r}},1962:(e,a,t)=>{t.d(a,{A:()=>s});var l=t(5155);t(2115);let s=e=>{let{label:a,placeholder:t="",value:s,onChange:r,type:n="text",name:o,required:i=!1,className:d}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1 ".concat(d),children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700",children:a}),(0,l.jsx)("input",{type:n,name:o,required:i,value:s,onChange:r,placeholder:t,className:"border bg-white rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}},2090:(e,a,t)=>{t.d(a,{A:()=>s});var l=t(5155);t(2115);let s=e=>{let{label:a,name:t,value:s,onChange:r,placeholder:n="",rows:o=4,className:i="",error:d}=e;return(0,l.jsxs)("div",{className:"w-full ".concat(i),children:[a&&(0,l.jsx)("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,l.jsx)("textarea",{id:t,name:t,value:s,onChange:r,rows:o,placeholder:n,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition text-sm ".concat(d?"border-red-500":"border-gray-300")}),d&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:d})]})}},4751:(e,a,t)=>{t.d(a,{A:()=>s});var l=t(5155);t(2115);let s=e=>{let{label:a,options:t,value:s,onChange:r,name:n,disabled:o=!1,className:i=""}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1 ".concat(i),children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700",children:a}),(0,l.jsxs)("select",{name:n,value:s,onChange:r,disabled:o,className:"border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"-- กรุณาเลือก --"}),t.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]})]})}}}]);